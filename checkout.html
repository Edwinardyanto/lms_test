<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Checkout - TeleSignal AI</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Barlow:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;600;700&display=swap" rel="stylesheet" />

  <style>
    :root {
      --primary: #00ff88;
      --primary-dark: #00cc6a;
      --bg-dark: #0a0e1a;
      --bg-card: #111827;
      --text: #e5e7eb;
      --text-dim: #9ca3af;
      --border: rgba(255, 255, 255, 0.08);
      --field-bg: rgba(255, 255, 255, 0.06);
      --field-border: rgba(255, 255, 255, 0.12);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Barlow', sans-serif;
      background: radial-gradient(900px 500px at 50% 0%, rgba(0,255,136,0.08), transparent 60%), var(--bg-dark);
      color: var(--text);
      min-height: 100vh;
      padding: 40px 20px;
    }

    .container-shell {
      max-width: 760px;
      margin: 0 auto;
    }

    .logo {
      font-size: 32px;
      font-weight: 900;
      color: var(--primary);
      text-align: center;
      margin-bottom: 28px;
      letter-spacing: 0.2px;
    }

    .checkout-card {
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      border-radius: 24px;
      padding: 40px;
      border: 1px solid var(--border);
      box-shadow: 0 24px 90px rgba(0,0,0,0.45);
      backdrop-filter: blur(10px);
    }

    h1 {
      font-size: 28px;
      margin-bottom: 22px;
      text-align: center;
      letter-spacing: 0.2px;
    }

    .plan-info {
      background: rgba(0, 255, 136, 0.10);
      border: 1px solid rgba(0, 255, 136, 0.35);
      border-radius: 18px;
      padding: 24px;
      margin-bottom: 18px;
    }

    .plan-name {
      font-size: 18px;
      font-weight: 900;
      color: var(--primary);
      margin-bottom: 8px;
    }

    .plan-price {
      font-size: 38px;
      font-weight: 900;
      margin-bottom: 8px;
      line-height: 1.05;
    }

    .plan-meta {
      color: var(--text-dim);
      margin-bottom: 14px;
      font-size: 14px;
    }

    .plan-features {
      list-style: none;
      margin: 0;
      padding: 0;
      display: grid;
      gap: 10px;
    }

    .plan-features li {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      font-size: 14px;
      color: var(--text-dim);
      line-height: 1.35;
    }

    .plan-features li::before {
      content: '✓';
      color: var(--primary);
      font-weight: 900;
      font-size: 16px;
      line-height: 1;
      margin-top: 1px;
      flex-shrink: 0;
    }

    .back-link {
      display: block;
      text-align: center;
      margin-top: 20px;
      color: var(--text-dim);
      text-decoration: none;
      font-size: 14px;
    }

    .back-link:hover { color: var(--primary); }

    /* ============================================================
       ORDERONLINE SKIN (match TeleSignal AI)
       Embed output based on inspect: .checkout-body, .form-group,
       .ooef-payment-options, .order-summary, #btn-complete-order
       ============================================================ */

    .oo-skin { margin-top: 14px; }

    /* Kill default outer spacing from vendor styles */
    .oo-skin .container,
    .oo-skin .container-fluid {
      padding-left: 0 !important;
      padding-right: 0 !important;
      max-width: 100% !important;
    }

    .oo-skin .checkout-body { padding: 0 !important; }
    .oo-skin .row { margin: 0 !important; }
    .oo-skin .col { padding: 0 !important; }

    /* Hide seals and internal header/footer if present */
    .oo-skin .image-container,
    .oo-skin .app-header,
    .oo-skin .app-footer {
      display: none !important;
    }

    /* Section titles */
    .oo-skin .section-title span,
    .oo-skin .order-summary-header {
      display: block !important;
      font-weight: 900 !important;
      font-size: 14px !important;
      letter-spacing: 0.2px !important;
      color: rgba(229,231,235,0.92) !important;
      margin: 16px 0 10px !important;
      text-transform: none !important;
    }

    /* Boxes */
    .oo-skin .contact-information,
    .oo-skin .payment-information,
    .oo-skin .order-summary,
    .oo-skin .product-features {
      background: rgba(255,255,255,0.02) !important;
      border: 1px solid var(--border) !important;
      border-radius: 16px !important;
      padding: 18px !important;
      margin-top: 12px !important;
    }

    .oo-skin .product-feature-item__content {
      color: var(--text-dim) !important;
      font-size: 14px !important;
    }

    .oo-skin .product-feature-item__mark .mark-icon {
      color: var(--primary) !important;
    }

    /* Inputs */
    .oo-skin .form-group { margin-bottom: 12px !important; }

    .oo-skin input.form-control,
    .oo-skin select.form-control,
    .oo-skin textarea.form-control {
      width: 100% !important;
      padding: 14px 16px !important;
      background: var(--field-bg) !important;
      border: 1px solid var(--field-border) !important;
      border-radius: 12px !important;
      color: var(--text) !important;
      font-size: 16px !important;
      font-family: 'Barlow', sans-serif !important;
      box-shadow: none !important;
      outline: none !important;
    }

    .oo-skin input.form-control::placeholder,
    .oo-skin textarea.form-control::placeholder {
      color: rgba(229,231,235,0.55) !important;
    }

    .oo-skin input.form-control:focus,
    .oo-skin select.form-control:focus,
    .oo-skin textarea.form-control:focus {
      border-color: rgba(0,255,136,0.85) !important;
      box-shadow: 0 0 0 3px rgba(0,255,136,0.12) !important;
    }

    /* Payment options as premium cards */
    .oo-skin .ooef-payment-options {
      display: grid !important;
      grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
      gap: 12px !important;
      margin-top: 10px !important;
    }

    .oo-skin .ooef-payment-option { margin: 0 !important; }

    .oo-skin .ooef-payment-option-title {
      background: var(--field-bg) !important;
      border: 2px solid var(--field-border) !important;
      border-radius: 14px !important;
      padding: 12px 12px !important;
      transition: transform 0.18s ease, border-color 0.18s ease, background 0.18s ease, box-shadow 0.18s ease !important;
    }

    .oo-skin .ooef-payment-option-title:hover {
      border-color: rgba(0,255,136,0.55) !important;
      transform: translateY(-1px) !important;
    }

    .oo-skin .ooef-payment-option-title.is-active {
      background: rgba(0,255,136,0.10) !important;
      border-color: rgba(0,255,136,0.78) !important;
      box-shadow: 0 0 0 3px rgba(0,255,136,0.10) !important;
    }

    /* Custom radio layout */
    .oo-skin .custom-control { padding-left: 0 !important; margin: 0 !important; }
    .oo-skin .custom-control-input { display: none !important; }

    .oo-skin .custom-control-label {
      display: flex !important;
      align-items: center !important;
      gap: 10px !important;
      cursor: pointer !important;
      margin: 0 !important;
      font-weight: 800 !important;
      color: rgba(229,231,235,0.92) !important;
      line-height: 1.2 !important;
    }

    .oo-skin .custom-control-label img {
      width: 28px !important;
      height: 28px !important;
      object-fit: contain !important;
      filter: saturate(1.05) !important;
    }

    /* Order summary typography */
    .oo-skin .order-summary .product-price__name,
    .oo-skin .order-summary .product-price__price,
    .oo-skin .order-summary .summary-product-name,
    .oo-skin .order-summary .summary-product-price,
    .oo-skin .order-summary .summary-product-total-price {
      color: rgba(229,231,235,0.92) !important;
      font-weight: 800 !important;
    }

    .oo-skin .order-summary .discount-summary-text,
    .oo-skin .order-summary .discount-summary-value {
      color: rgba(156,163,175,0.95) !important;
      font-weight: 700 !important;
    }

    .oo-skin .order-summary .total-price {
      border-top: 1px dashed rgba(255,255,255,0.15) !important;
      padding-top: 14px !important;
      margin-top: 10px !important;
    }

    /* Submit button */
    .oo-skin .checkout-actions { margin-top: 16px !important; }

    .oo-skin .btn.btn-complete-order,
    .oo-skin #btn-complete-order {
      width: 100% !important;
      padding: 18px !important;
      background: var(--primary) !important;
      color: var(--bg-dark) !important;
      border: none !important;
      border-radius: 14px !important;
      font-size: 18px !important;
      font-weight: 900 !important;
      cursor: pointer !important;
      transition: background 0.25s ease, transform 0.25s ease !important;
      box-shadow: none !important;
    }

    .oo-skin .btn.btn-complete-order:hover,
    .oo-skin #btn-complete-order:hover {
      background: var(--primary-dark) !important;
      transform: translateY(-2px) !important;
    }

    .oo-skin .btn.btn-complete-order .submit-arrow { display: none !important; }

    /* Hide coupon + captcha if not used */
    .oo-skin .coupon-code,
    .oo-skin .oo-captcha-container,
    .oo-skin .oo-invisible-captcha-container {
      display: none !important;
    }

    /* Loader */
    .ooef-loader {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 120px;
      color: var(--text-dim);
      font-size: 14px;
      position: relative;
    }

    @media (max-width: 720px) {
      .checkout-card { padding: 28px; }
    }

    @media (max-width: 520px) {
      .plan-price { font-size: 32px; }
      .oo-skin .ooef-payment-options { grid-template-columns: 1fr !important; }
    }
  </style>
</head>

<body>
  <div class="container-shell">
    <div class="logo">TeleSignal AI</div>

    <div class="checkout-card">
      <h1>Checkout</h1>

      <div class="plan-info" id="planInfo"></div>

      <div class="oo-skin">
        <!-- OrderOnline Embed Container -->
        <div class="ooef">
          <form class="orderonline-embed-form"
                data-username="winbiz"
                data-product-slug=""
                data-product-id=""
                id="oo-embed-form-dynamic"
                data-origin="orderonline">
            <div class="ooef-loader">
              Loading checkout...
            </div>
          </form>
        </div>
      </div>

      <a href="index.html" class="back-link">← Kembali ke halaman utama</a>
    </div>
  </div>

  <script>
    // ========= Plan UI (TeleSignal AI) =========
    const plans = {
      starter: {
        name: 'Starter',
        price: 'Rp 99.000',
        period: '1 Bulan',
        features: [
          'User profiling lengkap',
          'Signal harian personal',
          'Multi market: Forex, Gold, Crypto, Stocks',
          'Chart analysis (optional upload)',
          'Risk management sesuai profil',
          'Penjelasan adaptive (beginner/pro)',
          'No-trade alert',
          'Support via Telegram Bot'
        ]
      },
      pro: {
        name: 'Pro Trader',
        price: 'Rp 499.000',
        period: '6 Bulan',
        features: [
          'Semua fitur Starter',
          'Signal priority (first access)',
          'Performance tracking & analytics',
          'AI learning from your feedback',
          'Weekly market outlook report',
          'Custom pair monitoring (up to 5 pairs)',
          'Advanced risk calculator',
          'Hemat 17% vs beli bulanan'
        ]
      },
      elite: {
        name: 'Elite Annual',
        price: 'Rp 999.000',
        period: '12 Bulan',
        features: [
          'Semua fitur Pro Trader',
          'VIP signal access (real-time)',
          'Dedicated AI model fine-tuned for you',
          'Custom strategy builder',
          'Unlimited pair monitoring',
          '1-on-1 consultation (monthly)',
          'API access untuk automation',
          'Hemat 16% vs beli bulanan'
        ]
      }
    };

    const urlParams = new URLSearchParams(window.location.search);
    const selectedPlan = (urlParams.get('plan') || urlParams.get('package') || 'starter').toLowerCase();
    const plan = plans[selectedPlan] || plans.starter;

    document.getElementById('planInfo').innerHTML = `
      <div class="plan-name">${plan.name}</div>
      <div class="plan-price">${plan.price}</div>
      <div class="plan-meta">${plan.period}</div>
      <ul class="plan-features">
        ${plan.features.map(f => `<li>${f}</li>`).join('')}
      </ul>
    `;

    // ========= OrderOnline Product Mapping =========
    const ooProducts = {
      starter: {
        slug: 'ai-penasihat-trading-coba-1-bulan',
        productId: '698dfbda97903dc2fa052899'
      },
      pro: {
        slug: 'ai-penasihat-trading-pro-6-bulan',
        productId: '698dfe398f0cc8edbe0cfebc'
      },
      elite: {
        slug: 'ai-penasihat-trading-elite-12-bulan',
        productId: '698dff520a7bd77d1804a6ed'
      }
    };

    const OO_USER_ID = '63bedb5f983fd6d05d01448a';
    const OO_USERNAME = 'winbiz';
    const OO_REDIRECT = 'https://winbiz.orderonline.id';

    function ensureOOInit() {
      if (window.ooe) return;
      const n = window.ooe = function() {
        n.callMethod ? n.callMethod.apply(n, arguments) : n.queue.push(arguments);
      };
      if (!window._ooe) window._ooe = n;
      n.push = n;
      n.loaded = true;
      n.version = '8.0.2';
      n.queue = [];
    }

    function loadScriptOnce(id, src, onload) {
      if (document.getElementById(id)) { if (onload) onload(); return; }
      const s = document.createElement('script');
      s.id = id;
      s.async = true;
      s.src = src;
      if (onload) s.addEventListener('load', onload);
      document.head.appendChild(s);
    }

    function xLogError(error) {
      try {
        const req = new XMLHttpRequest();
        const payload = JSON.stringify({ url: document.location.href, line: error.line, stack: error.stack });
        const params = 'message=' + encodeURIComponent(error.name) + '&payload=' + encodeURIComponent(payload) + '&type=embed&level=error';
        req.open('POST', 'https://api.orderonline.id/log', true);
        req.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        req.send(params);
      } catch (e) {}
    }

    function initOrderOnlineEmbed() {
      try {
        const prod = ooProducts[selectedPlan] || ooProducts.starter;

        const form = document.getElementById('oo-embed-form-dynamic');
        const dynamicFormId = `oo-embed-form-${prod.slug}`;
        form.id = dynamicFormId;
        form.setAttribute('data-username', OO_USERNAME);
        form.setAttribute('data-product-slug', prod.slug);
        form.setAttribute('data-product-id', prod.productId);

        ensureOOInit();

        window.ooe('setup', 'redirect', OO_REDIRECT);
        window.ooe('init', OO_USER_ID, prod.productId, null, dynamicFormId, {
          mode: 'page',
          action: 'Klik untuk pemesanan',
          title: 'Form Pemesanan',
          triggerPixel: true,
          triggerGtm: true
        });

        const loadEmbed = () => loadScriptOnce('oo-embed-js', 'https://cdn.orderonline.id/js/embed-v2-slim.min.js?v=8.0.2');

        if (!window.jQuery) {
          loadScriptOnce('oo-embed-jquery', 'https://cdn.orderonline.id/js/vendor/jquery.min.js', loadEmbed);
        } else {
          loadEmbed();
        }

        // After embed renders, apply payment "active" class universally (no :has dependency)
        enhancePaymentActiveState();
      } catch (e) {
        xLogError(e);
        throw e;
      }
    }

    function enhancePaymentActiveState() {
      const maxWaitMs = 8000;
      const start = Date.now();

      const tick = () => {
        const options = document.querySelectorAll('.ooef-payment-option-title');
        const radios = document.querySelectorAll('input.ooef-payment-method');

        if (!options.length || !radios.length) {
          if (Date.now() - start < maxWaitMs) return requestAnimationFrame(tick);
          return;
        }

        const sync = () => {
          options.forEach(el => el.classList.remove('is-active'));
          radios.forEach(r => {
            if (r.checked) {
              const title = r.closest('.ooef-payment-option-title');
              if (title) title.classList.add('is-active');
            }
          });
        };

        // initial
        sync();

        // click / change
        document.addEventListener('change', (e) => {
          const t = e.target;
          if (t && t.matches && t.matches('input.ooef-payment-method')) sync();
        }, true);

        document.addEventListener('click', (e) => {
          const label = e.target.closest && e.target.closest('.ooef-payment-option-title');
          if (label) {
            const input = label.querySelector('input.ooef-payment-method');
            if (input) input.checked = true;
            sync();
          }
        }, true);
      };

      requestAnimationFrame(tick);
    }

    initOrderOnlineEmbed();
  </script>
</body>
</html>
